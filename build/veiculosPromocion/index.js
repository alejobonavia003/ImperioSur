(()=>{"use strict";const e=window.wp.blocks,a=window.wp.element,n=window.wp.components,o=window.wp.blockEditor,r=window.ReactJSXRuntime,t=JSON.parse('{"UU":"revendedores-autos/tarjeta-autop-promocion"}'),s=(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[(0,r.jsx)("rect",{width:"24",height:"24",fill:"#0078FF"}),(0,r.jsx)("text",{x:"3.5",y:"16",fill:"#FFFFFF","font-size":"10","font-family":"Arial, sans-serif","font-weight":"bold",children:"IS"})]});(0,e.registerBlockType)(t.UU,{icon:s,edit:function(e){const{attributes:t,setAttributes:s}=e,{cards:i=[]}=t,[l,c]=(0,a.useState)(null),d=(e,a,n)=>{const o=i.map(((o,r)=>r===e?{...o,[a]:n}:o));s({cards:o})};return(0,r.jsxs)("div",{children:[i.map(((e,a)=>{const t=l===a;return(0,r.jsxs)(n.Card,{style:{marginBottom:"15px",border:"1px solid #eee"},children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",cursor:"pointer",padding:"10px 16px",background:"#f7f7f7",borderBottom:t?"1px solid #eee":"none"},onClick:()=>c(t?null:a),children:[(0,r.jsx)("span",{style:{marginRight:12,transition:"transform 0.2s",transform:t?"rotate(90deg)":"rotate(0deg)"},children:(0,r.jsx)(n.Icon,{icon:"arrow-down"})}),e.imagenes&&e.imagenes[0]&&(0,r.jsx)("img",{src:e.imagenes[0],alt:"Auto",style:{width:50,height:50,objectFit:"cover",borderRadius:6,marginRight:12}}),(0,r.jsx)("span",{style:{fontWeight:600},children:e.marca||"Sin marca"})]}),t&&(0,r.jsxs)(n.CardBody,{children:[(0,r.jsx)(o.MediaUploadCheck,{children:(0,r.jsx)(o.MediaUpload,{onSelect:e=>((e,a)=>{const n=i.map(((n,o)=>o===e?{...n,imagenes:a}:n));s({cards:n})})(a,e.map((e=>e.url))),allowedTypes:["image"],multiple:!0,gallery:!0,render:({open:e})=>(0,r.jsx)(n.Button,{onClick:e,isPrimary:!0,children:"Seleccionar imágenes"})})}),e.imagenes&&e.imagenes.map(((e,a)=>(0,r.jsx)(n.CardMedia,{children:(0,r.jsx)("img",{src:e,alt:`Auto ${a}`,style:{width:"150px",height:"150px"}})},a))),(0,r.jsx)(n.TextControl,{label:"Marca",value:e.marca,onChange:e=>d(a,"marca",e)}),(0,r.jsx)(n.TextControl,{label:"Modelo",value:e.modelo,onChange:e=>d(a,"modelo",e)}),(0,r.jsx)(n.TextControl,{label:"Año",value:e.año,onChange:e=>d(a,"año",e)}),(0,r.jsx)(n.TextControl,{label:"Precio",value:e.precio,onChange:e=>d(a,"precio",e)}),(0,r.jsx)(n.TextControl,{label:"Descripción",value:e.descripcion,onChange:e=>d(a,"descripcion",e)}),(0,r.jsx)(n.TextControl,{label:"Link de WhatsApp (o cualquier link de contacto)",value:e.whatsapp,onChange:e=>d(a,"whatsapp",e)}),(0,r.jsx)(n.TextControl,{label:"Mensaje personalizado para WhatsApp",help:"Este mensaje se enviará al hacer clic en el botón, en lugar del mensaje predeterminado.",value:e.mensajePersonalizado||"",onChange:e=>d(a,"mensajePersonalizado",e)}),(0,r.jsx)(n.Button,{isDestructive:!0,onClick:()=>(e=>{const a=i.filter(((a,n)=>n!==e));s({cards:a}),l===e&&c(null)})(a),style:{marginTop:"10px"},children:"Eliminar Tarjeta"})]})]},a)})),(0,r.jsx)(n.Button,{isPrimary:!0,onClick:()=>{s({cards:[...i,{marca:"",modelo:"",año:"",precio:"",descripcion:"",whatsapp:"",imagenes:[],mensajePersonalizado:""}]})},children:"Agregar Tarjeta"})]})},save:function(){return null}})})();